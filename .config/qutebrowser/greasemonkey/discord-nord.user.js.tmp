// ==UserScript==
// @name        Discord web app customisation
// @description Custom Nord CSS and spam element removal
// @include     *://*.discord.com/channels/*
// @run-at      document-end
// @grant       GM_addStyle
// ==/UserScript==

(function() {
	addStyle();
	removeDistractions();
})()

function addStyle() {
	'use strict';

/* This work is released into the public domain under the terms
 * of the creative commons legal code CC0 1.0 Universal.
 *
 * Please review the LICENSE.md file at <https://github.com/l-zeuch/yag-nord>
 * for more information.
 */

/*
 * Set up the nord palette, as per
 * https://www.nordtheme.com/docs/colors-and-palettes
 */
	GM_addStyle(`
:root {
  --textinputs: #343c4c;
  --pagecolor: #2e3440;
  --popup-color: #3b4252;
  --btn-color: #455981;
  --secondarytext: #5e81ac;
  --usertext: #81a1c1;
  --redtext: #8c3c4c;
  --whitetext: #dedede;
  --bodytext: #629499;
  --replytext: #b3dcde;
  --contacts: #7dc5cd;
  --background-secondary-alt: #2e3440 !important;
}

.theme-dark {
  --header-secondary: var(--bodytext);
  --text-normal: var(--secondarytext);
  --text-muted: var(--secondarytext);
  --channels-default: var(--secondarytext);
  --interactive-normal: var(--bodytext);
  --interactive-active: var(--bodytext);
  --interactive-muted: var(--bodytext);
  --background-primary: var(--pagecolor);
  --background-secondary: var(--pagecolor);
  --background-tertiary: var(--pagecolor);
  --background-accent: var(--pagecolor);
  --background-floating: var(--textinputs);
  --background-modifier-hover: var(--textinputs);
  --background-modifier-active: var(--textinputs);
  --background-modifier-selected: var(--textinputs);
  --background-modifier-accent: var(--pagecolor);
  --elevation-low: 0 4px 0 rgba(0, 0, 0, 0.4);
  --elevation-high: 0 8px 16px rgba(0, 0, 0, 0.4);
  --guild-header-text-shadow: none;
  --channeltextarea-background: var(--textinputs);
  --activity-card-background: var(--textinputs);
  --deprecated-panel-background: var(--textinputs);
  --deprecated-card-bg: var(--textinputs);
  --deprecated-card-editable-bg: var(--gradientright);
  --deprecated-store-bg: var(--textinputs);
  --deprecated-quickswitcher-input-background: var(--gradient);
  --deprecated-quickswitcher-input-placeholder: var(--bodytext);
  --deprecated-text-input-bg: var(--textinputs);
  --deprecated-text-input-border: var(--textinputs);
  --deprecated-text-input-border-hover: var(--pagecolor);
  --deprecated-text-input-border-disabled: var(--textinputs);
  --deprecated-text-input-prefix: var(--whitetext);
}

body {
  font-weight: 300 !important;
  zoom: 0.9;
}

.header-2o-2hj {
  color: var(--whitetext);
}

.circleIconButton-jET_ig,
.message-3SOT5P {
  color: var(--secondarytext);
}

.item-2hkk8m {
  background-color: var(--bodytext);
}

.base-1x0h_U {
  color: var(--secondarytext);
}

.close-relY5R {
  color: var(--secondarytext);
}

/* .lookFilled-1Gx00P.colorBrand-3pXr91, https://github.com/Ryan-da-ghost/Nord-Web-Themes/issues/10 */
/* .lookInverted-2D7oAl.colorBrand-3pXr91,
.lookInverted-2D7oAl.colorBrand-3pXr91:hover {
  background-color: var(--secondarytext) !important;
  color: var(--bodytext) !important;
} */

/* Scrollbar grab bar */
/* .theme-dark
  .scrollerThemed-2oenus.themedWithTrack-q8E3vB
  .scroller-2FKFPG::-webkit-scrollbar-thumb {
  background: linear-gradient(
    130deg,
    var(--gradientright),
    var(--gradientleft)
  ) !important;
  border: 1px solid var(--textinputs);
} */

/* Scrollbar container */
.theme-dark
  .scrollerThemed-2oenus.themedWithTrack-q8E3vB
  .scroller-2FKFPG::-webkit-scrollbar-track-piece {
  background-color: var(--textinputs);
  border: none;
}

.theme-dark .isMentioned-N-h9aa {
  background-color: var(--textinputs);
}

.theme-dark .isMentioned-N-h9aa .mention {
  background: linear-gradient(
    130deg,
    var(--gradientright),
    var(--gradientleft)
  ) !important;
  color: var(--bodytext);
}

.theme-dark .headerNormal-T_seeN {
  background-color: var(--pagecolor);
}

.theme-dark .headerTagUsernameNoNickname-2_H881 {
  color: var(--usertext);
}

.theme-dark .headerText-3Uvj1Y .username-1A8OIy {
  color: var(--usertext);
}

.theme-dark .body-3iLsc4 {
  background-color: var(--pagecolor);
}

.theme-dark .footer-1fjuF6 {
  background-color: var(--pagecolor);
}

.offline-3nJYBR {
  opacity: 1;
}

.lookFilled-1Gx00P.colorGreen-29iAKY:hover,
.lookFilled-1Gx00P.colorGreen-29iAKY {
  color: #fff;
  background-color: var(--btn-color);
}

#ALL-tab,
#BLOCKED-tab,
#PENDING-tab,
#ONLINE-tab {
  background-color: var(--pagecolor) !important;
}

.title-eS5yk3 {
  color: var(--usertext) !important;
}

::-webkit-scrollbar {
  background: rgba(0, 0, 0, 0.4);
}

::-webkit-scrollbar-button {
  background: rgba(0, 0, 0, 0.4);
}

::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.4);
}

::-webkit-scrollbar-track-piece {
  background: rgba(0, 0, 0, 0.4);
}

::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.4);
}

::-webkit-scrollbar-corner {
  background: rgba(0, 0, 0, 0.4);
}

::-webkit-resizer {
  background: rgba(0, 0, 0, 0.4);
}

.headerTagNoNickname-ENx6no.headerTag-2pZJzA.size14-3iUx6q.size16-14cGz5.nameTag-m8r81H
  span {
  color: var(--header-secondary);
}

.headerPlaying-j0WQBV {
  background-color: var(--pagecolor) !important;
}

.headerTagNoNickname-ENx6no.headerTag-2pZJzA.size14-3iUx6q.size16-14cGz5.nameTag-m8r81H
  span {
  color: var(--header-secondary);
}

.topSectionPlaying-1J5E4n,
.card-o7rAq-.cardPrimaryEditable-3KtE4g.card-3Qj_Yx {
  background: transparent !important;
}

.username-1A8OIy.clickable-1bVtEA {
  color: var(--usertext);
}

.scroller-1d5FgU.auto-Ge5KZx.scrollerBase-289Jih {
  background: var(--pagecolor);
}

.embedWrapper_b558d0 {
  background: yellow;
}
`)

	console.info('Added Nord CSS [Discord]');
}

function removeDistractions() {
	'use strict';

	// remove elements by ID
	//[].forEach((id) => {
	//	let el = document.getElementById(id)
	//	if (el) {
	//		el.parentNode.removeChild(el);
	//	}
	//});

	// remove elements by class name
	['button_dd4f85'].forEach((name) => {
		let els = document.getElementsByClassName(name)
		Array.from(els).forEach((el) => {
			el.parentNode.removeChild(el);
		});
	});

	//let downloadButton = document.getElementsByClassName('listItemWrapper_dfb2f8')[0]
	//downloadButton.parentElement.parentNode.removeChild(downloadButton)

	console.info('Removed distractions [Discord]');
}
